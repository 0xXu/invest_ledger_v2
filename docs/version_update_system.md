# ç‰ˆæœ¬æ›´æ–°æ£€æµ‹ç³»ç»Ÿ

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æœ¬ç³»ç»Ÿå®ç°äº†åŸºäºGitHub Releaseçš„ç‰ˆæœ¬æ›´æ–°æ£€æµ‹åŠŸèƒ½ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æŸ¥æ›´æ–°ã€ç‰ˆæœ¬æ¯”è¾ƒã€æ›´æ–°æé†’ç­‰åŠŸèƒ½ã€‚

## âœ… å·²å®ç°åŠŸèƒ½

### 1. æ ¸å¿ƒåŠŸèƒ½
- **GitHub Release APIé›†æˆ** - è‡ªåŠ¨è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯
- **æ™ºèƒ½ç‰ˆæœ¬æ¯”è¾ƒ** - æ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬å·æ¯”è¾ƒ
- **è‡ªåŠ¨æ›´æ–°æ£€æŸ¥** - åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼ˆå¯é…ç½®ï¼‰
- **æ›´æ–°æé†’å¯¹è¯æ¡†** - ç”¨æˆ·å‹å¥½çš„æ›´æ–°é€šçŸ¥ç•Œé¢
- **ç‰ˆæœ¬ç®¡ç†é¡µé¢** - å®Œæ•´çš„ç‰ˆæœ¬ä¿¡æ¯å’Œè®¾ç½®ç•Œé¢

### 2. é…ç½®ç®¡ç†
- **é…ç½®æ–‡ä»¶ç®¡ç†** - é€šè¿‡ `lib/core/config/app_config.dart` ç»Ÿä¸€ç®¡ç†
- **å¼€å‘/ç”Ÿäº§ç¯å¢ƒ** - æ”¯æŒä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„GitHubä»“åº“
- **è‡ªåŠ¨æ£€æŸ¥é—´éš”** - å¯é…ç½®æ£€æŸ¥é¢‘ç‡ï¼ˆé»˜è®¤24å°æ—¶ï¼‰

### 3. ç”¨æˆ·ç•Œé¢
- **ç‰ˆæœ¬è®¾ç½®é¡µé¢** - æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ã€GitHubé…ç½®ã€æ£€æŸ¥æ›´æ–°ç­‰
- **æ›´æ–°å¯¹è¯æ¡†** - ç¾è§‚çš„æ›´æ–°æé†’ï¼ŒåŒ…å«ç‰ˆæœ¬ä¿¡æ¯å’Œæ›´æ–°å†…å®¹
- **è®¾ç½®é›†æˆ** - åœ¨åº”ç”¨è®¾ç½®ä¸­æ·»åŠ ç‰ˆæœ¬ç®¡ç†å…¥å£

## ğŸ”§ é…ç½®è¯´æ˜

### GitHubä»“åº“é…ç½®

ç¼–è¾‘ `lib/core/config/app_config.dart` æ–‡ä»¶ï¼š

```dart
class AppConfig {
  // ç”Ÿäº§ç¯å¢ƒGitHubé…ç½®
  static const String githubOwner = 'your-username';    // æ›¿æ¢ä¸ºä½ çš„GitHubç”¨æˆ·å
  static const String githubRepo = 'invest_ledger';     // æ›¿æ¢ä¸ºä½ çš„ä»“åº“å
  
  // å¼€å‘æ¨¡å¼é…ç½®
  static const bool isDevelopment = false;              // å‘å¸ƒæ—¶æ”¹ä¸ºfalse
  
  // æµ‹è¯•ç”¨GitHubé…ç½®ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
  static const String testGithubOwner = 'flutter';
  static const String testGithubRepo = 'flutter';
}
```

### é…ç½®æ­¥éª¤

1. **è®¾ç½®ç”Ÿäº§ç¯å¢ƒä»“åº“**
   ```dart
   static const String githubOwner = 'your-github-username';
   static const String githubRepo = 'your-repository-name';
   ```

2. **å‘å¸ƒæ—¶å…³é—­å¼€å‘æ¨¡å¼**
   ```dart
   static const bool isDevelopment = false;
   ```

3. **é…ç½®æ£€æŸ¥é—´éš”ï¼ˆå¯é€‰ï¼‰**
   ```dart
   static const Duration versionCheckInterval = Duration(hours: 24);
   ```

## ğŸ“± ä½¿ç”¨è¯´æ˜

### ç”¨æˆ·æ“ä½œ

1. **æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯**
   - è¿›å…¥ è®¾ç½® â†’ ç‰ˆæœ¬ç®¡ç†
   - æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ã€GitHubé…ç½®ç­‰ä¿¡æ¯

2. **æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°**
   - åœ¨ç‰ˆæœ¬ç®¡ç†é¡µé¢ç‚¹å‡»"ç«‹å³æ£€æŸ¥"æŒ‰é’®
   - ç³»ç»Ÿä¼šæ£€æŸ¥GitHub Releaseè·å–æœ€æ–°ç‰ˆæœ¬

3. **è‡ªåŠ¨æ£€æŸ¥è®¾ç½®**
   - å¯ä»¥å¼€å¯/å…³é—­è‡ªåŠ¨æ£€æŸ¥æ›´æ–°åŠŸèƒ½
   - é»˜è®¤æ¯24å°æ—¶æ£€æŸ¥ä¸€æ¬¡

4. **æ›´æ–°æ“ä½œ**
   - å‘ç°æ–°ç‰ˆæœ¬æ—¶ä¼šæ˜¾ç¤ºæ›´æ–°å¯¹è¯æ¡†
   - å¯ä»¥é€‰æ‹©ç«‹å³æ›´æ–°ã€ç¨åæé†’æˆ–å¿½ç•¥æ­¤ç‰ˆæœ¬
   - ç‚¹å‡»"ç«‹å³æ›´æ–°"ä¼šæ‰“å¼€ä¸‹è½½é¡µé¢

### è‡ªåŠ¨æ£€æŸ¥æœºåˆ¶

- **å¯åŠ¨æ£€æŸ¥** - åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥ï¼ˆå¦‚æœå¯ç”¨ä¸”è¶…è¿‡æ£€æŸ¥é—´éš”ï¼‰
- **é¢‘ç‡æ§åˆ¶** - é¿å…é¢‘ç¹æ£€æŸ¥ï¼Œé»˜è®¤24å°æ—¶æ£€æŸ¥ä¸€æ¬¡
- **é™é»˜å¤„ç†** - æ£€æŸ¥å¤±è´¥ä¸ä¼šå½±å“åº”ç”¨æ­£å¸¸ä½¿ç”¨

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ–‡ä»¶ç»“æ„
```
lib/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ app_config.dart              # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ exceptions/
â”‚       â””â”€â”€ app_exceptions.dart          # å¼‚å¸¸å®šä¹‰
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ version_info.dart            # ç‰ˆæœ¬ä¿¡æ¯æ¨¡å‹
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ version_service.dart         # ç‰ˆæœ¬æœåŠ¡
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ version_repository.dart      # ç‰ˆæœ¬ä»“åº“
â”œâ”€â”€ presentation/
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â””â”€â”€ version_provider.dart        # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ pages/settings/
â”‚   â”‚   â””â”€â”€ version_settings_page.dart   # ç‰ˆæœ¬è®¾ç½®é¡µé¢
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ update_dialog.dart           # æ›´æ–°å¯¹è¯æ¡†
â”‚       â””â”€â”€ version_check_wrapper.dart   # ç‰ˆæœ¬æ£€æŸ¥åŒ…è£…å™¨
â””â”€â”€ shared/
    â””â”€â”€ widgets/
        â””â”€â”€ loading_overlay.dart         # åŠ è½½é®ç½©
```

### æ•°æ®æµ
1. **åº”ç”¨å¯åŠ¨** â†’ VersionCheckWrapper â†’ æ£€æŸ¥æ˜¯å¦éœ€è¦è‡ªåŠ¨æ£€æŸ¥
2. **ç‰ˆæœ¬æœåŠ¡** â†’ GitHub Release API â†’ è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯
3. **ç‰ˆæœ¬æ¯”è¾ƒ** â†’ VersionComparator â†’ åˆ¤æ–­æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬
4. **çŠ¶æ€ç®¡ç†** â†’ Riverpod Provider â†’ ç®¡ç†æ£€æŸ¥çŠ¶æ€å’Œç»“æœ
5. **ç”¨æˆ·ç•Œé¢** â†’ æ˜¾ç¤ºæ›´æ–°å¯¹è¯æ¡†æˆ–ç‰ˆæœ¬ä¿¡æ¯

## ğŸ” APIè¯´æ˜

### GitHub Release API
- **ç«¯ç‚¹**: `https://api.github.com/repos/{owner}/{repo}/releases/latest`
- **æ–¹æ³•**: GET
- **å¤´éƒ¨**: 
  - `Accept: application/vnd.github.v3+json`
  - `User-Agent: InvestLedger-App`

### å“åº”æ•°æ®
```json
{
  "tag_name": "v1.2.0",
  "name": "Release 1.2.0",
  "body": "æ›´æ–°å†…å®¹...",
  "html_url": "https://github.com/owner/repo/releases/tag/v1.2.0",
  "published_at": "2024-01-01T00:00:00Z",
  "prerelease": false,
  "draft": false,
  "assets": [...]
}
```

## ğŸš€ å‘å¸ƒæµç¨‹

### åˆ›å»ºRelease
1. åœ¨GitHubä»“åº“ä¸­åˆ›å»ºæ–°çš„Release
2. è®¾ç½®ç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ v1.2.0ï¼‰
3. å¡«å†™æ›´æ–°è¯´æ˜
4. ä¸Šä¼ APKç­‰å®‰è£…åŒ…ï¼ˆå¯é€‰ï¼‰
5. å‘å¸ƒRelease

### ç‰ˆæœ¬å·è§„èŒƒ
- ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼š`v{major}.{minor}.{patch}`
- ç¤ºä¾‹ï¼š`v1.0.0`, `v1.2.3`, `v2.0.0-beta.1`
- æ”¯æŒé¢„å‘å¸ƒç‰ˆæœ¬æ ‡è®°

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### æµ‹è¯•é…ç½®
å¼€å‘æ—¶å¯ä»¥ä½¿ç”¨Flutterå®˜æ–¹ä»“åº“è¿›è¡Œæµ‹è¯•ï¼š
```dart
static const bool isDevelopment = true;
static const String testGithubOwner = 'flutter';
static const String testGithubRepo = 'flutter';
```

### é”™è¯¯å¤„ç†
- ç½‘ç»œé”™è¯¯ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä¸å½±å“åº”ç”¨ä½¿ç”¨
- APIé™åˆ¶ï¼šGitHub APIæœ‰é¢‘ç‡é™åˆ¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†
- è§£æé”™è¯¯ï¼šç‰ˆæœ¬ä¿¡æ¯è§£æå¤±è´¥æ—¶ä¼šæ˜¾ç¤ºç›¸åº”é”™è¯¯

### æ‰©å±•åŠŸèƒ½
- æ”¯æŒè‡ªå®šä¹‰ä¸‹è½½æº
- æ”¯æŒå¢é‡æ›´æ–°
- æ”¯æŒæ›´æ–°è¿›åº¦æ˜¾ç¤º
- æ”¯æŒæ›´æ–°å†å²è®°å½•

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œæƒé™** - ç¡®ä¿åº”ç”¨æœ‰ç½‘ç»œè®¿é—®æƒé™
2. **GitHubé…ç½®** - å‘å¸ƒå‰åŠ¡å¿…é…ç½®æ­£ç¡®çš„GitHubä»“åº“ä¿¡æ¯
3. **ç‰ˆæœ¬å·æ ¼å¼** - ç¡®ä¿Releaseæ ‡ç­¾ä½¿ç”¨æ­£ç¡®çš„ç‰ˆæœ¬å·æ ¼å¼
4. **ç”¨æˆ·ä½“éªŒ** - æ›´æ–°æ£€æŸ¥ä¸åº”å½±å“åº”ç”¨æ­£å¸¸å¯åŠ¨å’Œä½¿ç”¨
5. **éšç§ä¿æŠ¤** - ç‰ˆæœ¬æ£€æŸ¥ä¸æ”¶é›†ç”¨æˆ·ä¸ªäººä¿¡æ¯
